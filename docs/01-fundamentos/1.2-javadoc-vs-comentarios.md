# 1.2 - JavaDoc vs Comentarios: cu√°ndo usar cada uno

## üéØ **Objetivos de Aprendizaje**
Al finalizar esta secci√≥n podr√°s:
- [ ] Distinguir cu√°ndo usar JavaDoc vs comentarios normales
- [ ] Aplicar la regla de "QU√â vs C√ìMO" correctamente
- [ ] Evitar documentaci√≥n redundante y ruido innecesario
- [ ] Crear c√≥digo auto-documentado que necesite m√≠nimos comentarios

---

## ü§î **La Gran Confusi√≥n: ¬øCu√°ndo usar qu√©?**

Esta es **la pregunta que separa a juniors de seniors**. Muchos desarrolladores documentan todo o no documentan nada. La clave est√° en entender el prop√≥sito de cada uno.

---

## üìã **La Regla de Oro: QU√â vs C√ìMO**

### **JavaDoc = QU√â hace (API p√∫blica)**
- Prop√≥sito del m√©todo/clase
- Contrato con el usuario
- Par√°metros y retornos
- Excepciones posibles
- Casos de uso

### **Comentarios = C√ìMO lo hace (Implementaci√≥n interna)**
- Algoritmos complejos
- Decisiones no obvias
- Trucos o workarounds
- Referencias externas
- TODOs temporales

---

## üí° **Ejemplos Pr√°cticos: BookStore Demo**

### **‚úÖ CORRECTO: JavaDoc para API p√∫blica**

```java
/**
 * Calcula el precio total de una orden incluyendo descuentos e impuestos.
 * 
 * Aplica descuentos en este orden de prioridad:
 * 1. Descuento por cantidad (5+ libros = 10% desc)
 * 2. Descuento de cliente premium (15% adicional)
 * 3. Cupones promocionales
 * 
 * Los impuestos se calculan despu√©s de aplicar descuentos.
 * 
 * @param order la orden a procesar, no debe ser null
 * @param customerType tipo de cliente para descuentos aplicables
 * @return precio final incluyendo descuentos e impuestos
 * @throws IllegalArgumentException si order es null o est√° vac√≠a
 * @throws TaxCalculationException si hay error calculando impuestos
 * @since 1.0.0
 */
public BigDecimal calculateTotalPrice(Order order, CustomerType customerType) {
    validateOrder(order); // ‚Üê No necesita JavaDoc (m√©todo privado)
    
    BigDecimal subtotal = order.getSubtotal();
    
    // Aplicamos descuento por cantidad
    // Usamos 5 como threshold porque marketing demostr√≥ que aumenta
    // el tama√±o promedio de orden en 23% (ver documento MKT-2024-Q1)
    if (order.getItemCount() >= BULK_DISCOUNT_THRESHOLD) {
        subtotal = subtotal.multiply(BULK_DISCOUNT_RATE);
    }
    
    // Descuento premium
    if (customerType == CustomerType.PREMIUM) {
        // Multiplicamos por 0.85 en lugar de restar 15% para evitar
        // errores de redondeo en c√°lculos financieros
        subtotal = subtotal.multiply(PREMIUM_DISCOUNT_MULTIPLIER);
    }
    
    return calculateWithTax(subtotal);
}
```

### **‚ùå INCORRECTO: Sobre-documentaci√≥n**

```java
/**
 * Valida una orden
 * @param order la orden
 */
private void validateOrder(Order order) { // ‚Üê M√©todo privado + nombre obvio = NO JavaDoc
    /**
     * Verifica si order es null
     */
    if (order == null) { // ‚Üê Comentario redundante
        throw new IllegalArgumentException("Order cannot be null");
    }
    
    /**
     * Verifica si tiene items
     */
    if (order.getItems().isEmpty()) { // ‚Üê Tambi√©n redundante
        throw new IllegalArgumentException("Order must have items");
    }
}
```

### **‚úÖ CORRECTO: Validaci√≥n simple y clara**

```java
// M√©todo privado con nombre descriptivo = sin JavaDoc necesario
private void validateOrder(Order order) {
    if (order == null) {
        throw new IllegalArgumentException("Order cannot be null");
    }
    
    if (order.getItems().isEmpty()) {
        throw new IllegalArgumentException("Order must have items");
    }
    
    // TODO: Agregar validaci√≥n de items duplicados (JIRA: BS-234)
}
```

---

## üéØ **Matriz de Decisi√≥n: ¬øDocumentar o No?**

<table>
<tr>
<th width="25%">Elemento</th>
<th width="25%">JavaDoc</th>
<th width="25%">Comentario</th>
<th width="25%">Ninguno</th>
</tr>
<tr>
<td><strong>M√©todo p√∫blico</strong></td>
<td>‚úÖ Siempre</td>
<td>‚ùå No</td>
<td>‚ùå No</td>
</tr>
<tr>
<td><strong>M√©todo privado obvio</strong></td>
<td>‚ùå No</td>
<td>‚ùå No</td>
<td>‚úÖ S√≠</td>
</tr>
<tr>
<td><strong>M√©todo privado complejo</strong></td>
<td>‚ùå No</td>
<td>‚úÖ S√≠ (algoritmo)</td>
<td>‚ùå No</td>
</tr>
<tr>
<td><strong>Clase p√∫blica</strong></td>
<td>‚úÖ Siempre</td>
<td>‚ùå No</td>
<td>‚ùå No</td>
</tr>
<tr>
<td><strong>Campo p√∫blico/protected</strong></td>
<td>‚úÖ Si no es obvio</td>
<td>‚ùå No</td>
<td>‚ö†Ô∏è Solo si obvio</td>
</tr>
<tr>
<td><strong>Campo privado</strong></td>
<td>‚ùå No</td>
<td>‚úÖ Si no es obvio</td>
<td>‚úÖ Si es obvio</td>
</tr>
<tr>
<td><strong>Algoritmo complejo</strong></td>
<td>‚ùå No</td>
<td>‚úÖ S√≠</td>
<td>‚ùå No</td>
</tr>
<tr>
<td><strong>Workaround temporal</strong></td>
<td>‚ùå No</td>
<td>‚úÖ Con TODO/FIXME</td>
<td>‚ùå No</td>
</tr>
</table>

---

## üîß **Casos Pr√°cticos del BookStore**

### **1. Entidad Book (Clase p√∫blica)**

```java
/**
 * Representa un libro en el cat√°logo de la librer√≠a.
 * 
 * Esta entidad gestiona toda la informaci√≥n b√°sica de un libro
 * incluyendo metadatos, pricing, inventory y relaciones con autores.
 * 
 * @author Zaira Mart√≠n
 * @since 1.0.0
 */
@Entity
@Table(name = "books")
public class Book {
    
    /**
     * Identificador √∫nico del libro en el sistema.
     */
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    /**
     * T√≠tulo completo del libro.
     * No puede ser null y debe tener entre 1 y 255 caracteres.
     */
    @NotBlank
    @Size(max = 255)
    private String title;
    
    /**
     * C√≥digo ISBN-13 √∫nico del libro.
     * Debe seguir el formato est√°ndar ISBN-13 (13 d√≠gitos).
     */
    @Column(unique = true)
    @ISBN
    private String isbn;
    
    // Precio base antes de descuentos
    private BigDecimal basePrice;
    
    // Stock actual en inventario
    private Integer stockQuantity;
    
    /**
     * Autores del libro.
     * Un libro puede tener m√∫ltiples autores (co-autores).
     */
    @ManyToMany
    @JoinTable(name = "book_authors")
    private Set<Author> authors = new HashSet<>();
}
```

### **2. Servicio con L√≥gica Compleja**

```java
@Service
public class PriceCalculationService {
    
    private static final int BULK_THRESHOLD = 5;
    private static final BigDecimal BULK_DISCOUNT = new BigDecimal("0.10");
    
    /**
     * Calcula el precio final de una orden aplicando todas las reglas de negocio.
     * 
     * <p>Este m√©todo centraliza toda la l√≥gica de pricing del sistema.
     * Los descuentos se aplican en cascada seg√∫n las reglas de negocio
     * definidas en el documento "Pricing Rules v2.3" (confluence).
     * 
     * <h3>Orden de aplicaci√≥n:</h3>
     * <ol>
     *   <li>Descuento por volumen (5+ items)</li>
     *   <li>Descuento de membres√≠a</li>
     *   <li>Cupones promocionales</li>
     *   <li>C√°lculo de impuestos</li>
     * </ol>
     * 
     * @param items lista de items en la orden, no debe ser null ni vac√≠a
     * @param customer cliente que realiza la compra, requerido para descuentos
     * @param promoCode c√≥digo promocional opcional, puede ser null
     * @return precio final con todos los descuentos e impuestos aplicados
     * @throws PricingException si hay error en el c√°lculo de precios
     * @throws IllegalArgumentException si items est√° vac√≠a o customer es null
     */
    public BigDecimal calculateFinalPrice(List<OrderItem> items, Customer customer, String promoCode) {
        
        validateInputs(items, customer);
        
        BigDecimal subtotal = calculateSubtotal(items);
        
        // Aplicamos descuentos en orden espec√≠fico
        // IMPORTANTE: El orden importa para el c√°lculo correcto
        subtotal = applyBulkDiscount(subtotal, items.size());
        subtotal = applyMembershipDiscount(subtotal, customer);
        subtotal = applyPromoCode(subtotal, promoCode);
        
        return addTaxes(subtotal, customer.getLocation());
    }
    
    private BigDecimal applyBulkDiscount(BigDecimal amount, int itemCount) {
        if (itemCount < BULK_THRESHOLD) {
            return amount;
        }
        
        // Usamos multiply en lugar de subtract para evitar
        // problemas de precisi√≥n en BigDecimal
        // 0.90 = aplicar 10% de descuento
        return amount.multiply(BigDecimal.ONE.subtract(BULK_DISCOUNT));
    }
    
    private BigDecimal addTaxes(BigDecimal amount, Location location) {
        // L√≥gica compleja de impuestos seg√∫n jurisdicci√≥n
        // Basado en la tabla de impuestos de 2024 (actualizada trimestralmente)
        
        // Para Espa√±a: IVA 21% en libros f√≠sicos, 4% en digitales
        // Para otros pa√≠ses: consultar TaxService
        if (location.getCountry().equals("ES")) {
            // Implementaci√≥n espec√≠fica espa√±ola
            return amount.multiply(new BigDecimal("1.21"));
        }
        
        // Delegamos a servicio especializado para otros pa√≠ses
        return taxService.calculateTax(amount, location);
    }
}
```

### **3. M√©todo Privado Simple (Sin documentar)**

```java
// M√©todos privados con nombres descriptivos no necesitan JavaDoc
private void validateInputs(List<OrderItem> items, Customer customer) {
    if (items == null || items.isEmpty()) {
        throw new IllegalArgumentException("Order items cannot be null or empty");
    }
    
    if (customer == null) {
        throw new IllegalArgumentException("Customer is required");
    }
}
```

---

## ‚ö†Ô∏è **Errores Comunes que Debes Evitar**

### **1. JavaDoc Redundante**
```java
// ‚ùå MALO: El JavaDoc no aporta informaci√≥n nueva
/**
 * Gets the book title
 * @return the title
 */
public String getTitle() {
    return title;
}

// ‚úÖ BUENO: Sin documentar (getter obvio)
public String getTitle() {
    return title;
}
```

### **2. Comentarios que Mienten**
```java
// ‚ùå MALO: El comentario est√° desactualizado
// Increments by 1
public void increment() {
    counter += 2; // ‚Üê El c√≥digo cambi√≥, el comentario no
}

// ‚úÖ BUENO: Comentario actualizado o c√≥digo que se explica solo
public void incrementByTwo() {
    counter += 2;
}
```

### **3. Sobre-documentaci√≥n de Implementaci√≥n**
```java
// ‚ùå MALO: Documentando cada l√≠nea
/**
 * Sorts books by title
 * @param books list to sort
 * @return sorted list
 */
public List<Book> sortBooksByTitle(List<Book> books) {
    /**
     * Create a new list
     */
    List<Book> sorted = new ArrayList<>(books);
    
    /**
     * Sort the list using comparator
     */
    sorted.sort(Comparator.comparing(Book::getTitle));
    
    /**
     * Return the sorted list
     */
    return sorted;
}
```

### **4. TODOs sin Contexto**
```java
// ‚ùå MALO: TODO vago
// TODO: fix this

// ‚úÖ BUENO: TODO espec√≠fico con contexto
// TODO: Optimizar consulta usando √≠ndice en title+author (JIRA: BS-123)
// Estimaci√≥n: 2 story points, necesita review de DBA
```

---

## üéØ **Checklist: ¬øEst√°s Documentando Correctamente?**

### **Usa JavaDoc cuando:**
- [ ] El elemento es p√∫blico o protected
- [ ] El prop√≥sito no es obvio por el nombre
- [ ] Hay reglas de negocio importantes
- [ ] El comportamiento puede tener side effects
- [ ] Existen precondiciones o postcondiciones
- [ ] El m√©todo puede lanzar excepciones

### **Usa comentarios cuando:**
- [ ] Hay algoritmos complejos no obvios
- [ ] Existen decisiones t√©cnicas espec√≠ficas
- [ ] Hay workarounds temporales
- [ ] Referencias a documentaci√≥n externa
- [ ] Explicaciones de performance o concurrencia

### **No documentes cuando:**
- [ ] El c√≥digo es auto-explicativo
- [ ] Los nombres son descriptivos y claros
- [ ] Son getters/setters simples
- [ ] La l√≥gica es trivial y obvia
- [ ] Ser√≠a informaci√≥n redundante

---

## üöÄ **C√≥digo Auto-Documentado: El Santo Grial**

El mejor c√≥digo necesita **m√≠nima documentaci√≥n** porque se explica solo:

```java
// ‚úÖ EXCELENTE: Se entiende sin documentaci√≥n
public class OrderPriceCalculator {
    
    public BigDecimal calculateTotalPrice(Order order) {
        return calculateSubtotal(order)
                .add(calculateTaxes(order))
                .subtract(calculateDiscounts(order));
    }
    
    private BigDecimal calculateSubtotal(Order order) {
        return order.getItems()
                .stream()
                .map(this::calculateItemPrice)
                .reduce(BigDecimal.ZERO, BigDecimal::add);
    }
    
    private BigDecimal calculateItemPrice(OrderItem item) {
        return item.getBook()
                .getBasePrice()
                .multiply(BigDecimal.valueOf(item.getQuantity()));
    }
}
```

**La meta:** C√≥digo tan claro que la documentaci√≥n sea m√≠nima pero precisa.

---

## üîó **Referencias y Recursos**

### **Clean Code Principles:**
- [Robert C. Martin - Clean Code](https://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882)
- [Google Java Style Guide](https://google.github.io/styleguide/javaguide.html#s7-javadoc)

### **JavaDoc Best Practices:**
- [Oracle - How to Write Doc Comments](https://www.oracle.com/technical-resources/articles/java/javadoc-tool.html)

---

## üìù **¬øQu√© Sigue?**

Ahora que sabes **qu√© documentar y cu√°ndo**, es hora de configurar tu entorno para que crear JavaDoc sea eficiente y profesional.

**Siguiente:** [1.3 - Configuraci√≥n del entorno (IDE, plugins)](1.3-configuracion-entorno.md)

---

<div align="center">

**üìö Progreso: Secci√≥n 1.2 completada** ‚úÖ  
*¬°Ya distingues como un pro cu√°ndo documentar!*

</div>