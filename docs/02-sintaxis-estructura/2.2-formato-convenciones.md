# 2.2 - Tags principales (@param, @return, @throws)

> **🎯 Objetivo:** Dominar los tags fundamentales de JavaDoc para documentar parámetros, valores de retorno y excepciones de forma profesional.

## Índice
- [Tag @param - Documentando parámetros](#tag-param---documentando-parámetros)
- [Tag @return - Documentando valores de retorno](#tag-return---documentando-valores-de-retorno)
- [Tag @throws - Documentando excepciones](#tag-throws---documentando-excepciones)
- [Casos especiales y variaciones](#casos-especiales-y-variaciones)
- [Ejemplos completos del sistema BookStore](#ejemplos-completos-del-sistema-bookstore)
- [Errores comunes y mejores prácticas](#errores-comunes-y-mejores-prácticas)

---

## Tag @param - Documentando parámetros

### Sintaxis y estructura básica

```java
/**
 * Method description.
 *
 * @param parameterName parameter description
 */
```

### Reglas fundamentales

1. **Orden obligatorio:** Los @param deben aparecer en el mismo orden que los parámetros del método
2. **Descripción específica:** Explica qué es el parámetro, no solo repitas su nombre
3. **Restricciones y tipos:** Incluye información sobre valores válidos, rangos, o estados

### Ejemplos básicos

```java
/**
 * Creates a new user account with validation.
 *
 * @param email user email address for login
 * @param password plain text password (minimum 8 characters)
 * @param age user age in years (must be 18 or older)
 */
public User createAccount(String email, String password, int age) {
    // implementación
}
```

### Documentando tipos complejos

```java
/**
 * Processes a batch of book orders.
 *
 * @param orders list of pending orders, cannot be null or empty
 * @param processingOptions configuration for batch processing behavior
 * @param callback function to execute after each order is processed
 */
public void processBatchOrders(List<Order> orders, 
                             ProcessingOptions processingOptions,
                             Consumer<Order> callback) {
    // implementación
}
```

### Parámetros opcionales y valores por defecto

```java
/**
 * Searches books in the catalog with optional filters.
 *
 * @param query search term, cannot be null or empty
 * @param category book category filter, null for all categories
 * @param sortBy sorting criteria, defaults to relevance if null
 * @param maxResults maximum number of results, defaults to 50 if <= 0
 */
public List<Book> searchBooks(String query, Category category, 
                            SortBy sortBy, int maxResults) {
    // implementación
}
```

---

## Tag @return - Documentando valores de retorno

### Sintaxis y estructura básica

```java
/**
 * Method description.
 *
 * @return description of what is returned
 */
```

### Qué incluir en @return

1. **Tipo específico:** No solo "returns a String", sino qué representa ese String
2. **Valores especiales:** null, listas vacías, valores por defecto
3. **Estados posibles:** success/failure, diferentes condiciones

### Ejemplos básicos

```java
/**
 * Validates user credentials against the database.
 *
 * @param email user email
 * @param password user password
 * @return true if credentials are valid, false otherwise
 */
public boolean validateCredentials(String email, String password) {
    // implementación
}

/**
 * Gets the user's full name for display.
 *
 * @param userId user identifier
 * @return formatted full name, or "Unknown User" if not found
 */
public String getUserDisplayName(long userId) {
    // implementación
}
```

### Documentando colecciones

```java
/**
 * Retrieves all books by the specified author.
 *
 * @param authorId author identifier
 * @return list of books, empty list if author has no books, never null
 */
public List<Book> getBooksByAuthor(long authorId) {
    // implementación
}

/**
 * Gets user preferences as key-value pairs.
 *
 * @param userId user identifier
 * @return map of preference keys to values, empty map if no preferences set
 */
public Map<String, String> getUserPreferences(long userId) {
    // implementación
}
```

### Tipos Optional y valores nullable

```java
/**
 * Finds a book by its ISBN.
 *
 * @param isbn book ISBN identifier
 * @return Optional containing the book if found, empty Optional otherwise
 */
public Optional<Book> findBookByISBN(String isbn) {
    // implementación
}

/**
 * Gets the user's profile picture URL.
 *
 * @param userId user identifier
 * @return profile picture URL, or null if no picture is set
 */
public String getProfilePictureUrl(long userId) {
    // implementación
}
```

---

## Tag @throws - Documentando excepciones

### Sintaxis y estructura básica

```java
/**
 * Method description.
 *
 * @throws ExceptionType when and why this exception is thrown
 */
```

### Reglas fundamentales

1. **Todas las checked exceptions:** Obligatorio documentar todas
2. **Runtime exceptions importantes:** Documenta las que el cliente debe manejar
3. **Condiciones específicas:** Explica exactamente cuándo se lanza cada excepción

### Ejemplos con checked exceptions

```java
/**
 * Loads book data from an external file.
 *
 * @param filePath path to the book data file
 * @return list of loaded books
 * @throws FileNotFoundException if the specified file does not exist
 * @throws IOException if an error occurs while reading the file
 * @throws ParseException if the file format is invalid
 */
public List<Book> loadBooksFromFile(String filePath) 
    throws FileNotFoundException, IOException, ParseException {
    // implementación
}
```

### Runtime exceptions importantes

```java
/**
 * Updates user account information.
 *
 * @param userId user identifier
 * @param updateData new user information
 * @throws IllegalArgumentException if userId is negative or zero
 * @throws IllegalArgumentException if updateData is null
 * @throws UserNotFoundException if no user exists with the given ID
 * @throws ValidationException if updateData contains invalid values
 */
public void updateUserAccount(long userId, UserUpdateData updateData) {
    // implementación
}
```

### Múltiples excepciones con condiciones específicas

```java
/**
 * Processes a payment for a book order.
 *
 * @param orderId order identifier
 * @param paymentInfo payment details
 * @return payment confirmation receipt
 * @throws IllegalArgumentException if orderId <= 0
 * @throws IllegalArgumentException if paymentInfo is null
 * @throws OrderNotFoundException if order does not exist
 * @throws InsufficientFundsException if payment amount exceeds available funds
 * @throws PaymentProcessingException if payment service is unavailable
 * @throws SecurityException if payment fails security validation
 */
public PaymentReceipt processPayment(long orderId, PaymentInfo paymentInfo) 
    throws OrderNotFoundException, InsufficientFundsException, 
           PaymentProcessingException, SecurityException {
    // implementación
}
```

---

## Casos especiales y variaciones

### Métodos sin parámetros

```java
/**
 * Gets the current system timestamp.
 *
 * @return current timestamp in milliseconds since epoch
 */
public long getCurrentTimestamp() {
    // implementación
}
```

### Métodos void

```java
/**
 * Clears all cached data and resets the system.
 *
 * @throws SystemException if reset operation fails
 */
public void clearCacheAndReset() throws SystemException {
    // implementación
}
```

### Parámetros varargs

```java
/**
 * Creates a book collection with the specified books.
 *
 * @param name collection name
 * @param books books to include in the collection (at least one required)
 * @return newly created book collection
 * @throws IllegalArgumentException if name is null or empty
 * @throws IllegalArgumentException if no books are provided
 */
public BookCollection createCollection(String name, Book... books) {
    // implementación
}
```

### Parámetros genéricos

```java
/**
 * Converts a list of entities to their DTO representation.
 *
 * @param <T> entity type
 * @param <D> DTO type
 * @param entities list of entities to convert
 * @param converter function to convert entity to DTO
 * @return list of converted DTOs, preserving original order
 * @throws IllegalArgumentException if entities or converter is null
 */
public <T, D> List<D> convertToDTO(List<T> entities, Function<T, D> converter) {
    // implementación
}
```

---

## Ejemplos completos del sistema BookStore

### Clase BookService completa

```java
/**
 * Service class for managing book operations in the bookstore.
 * 
 * This service handles CRUD operations for books, inventory management,
 * and search functionality. All operations are transactional and
 * include proper validation and error handling.
 *
 * @author Zaira Martín
 * @version 2.1.0
 * @since 1.0.0
 */
public class BookService {
    
    /**
     * Creates a new book in the catalog.
     *
     * @param bookData book information including title, author, and ISBN
     * @param initialStock initial inventory quantity
     * @return newly created book with generated ID
     * @throws IllegalArgumentException if bookData is null
     * @throws IllegalArgumentException if initialStock is negative
     * @throws DuplicateISBNException if a book with the same ISBN already exists
     * @throws ValidationException if bookData contains invalid values
     * @since 1.0.0
     */
    public Book createBook(BookCreateData bookData, int initialStock) 
        throws DuplicateISBNException, ValidationException {
        // implementación
    }
    
    /**
     * Searches for books matching the specified criteria.
     *
     * @param searchCriteria search parameters including query, filters, and sorting
     * @param pagination page number and size for results
     * @return paginated search results with total count and books
     * @throws IllegalArgumentException if searchCriteria is null
     * @throws IllegalArgumentException if pagination values are invalid
     * @throws SearchServiceException if search engine is unavailable
     * @since 1.1.0
     */
    public SearchResult<Book> searchBooks(SearchCriteria searchCriteria, 
                                        Pagination pagination) 
        throws SearchServiceException {
        // implementación
    }
    
    /**
     * Updates book information and validates changes.
     *
     * @param bookId existing book identifier
     * @param updateData partial book data with fields to update
     * @return updated book instance
     * @throws IllegalArgumentException if bookId <= 0
     * @throws IllegalArgumentException if updateData is null
     * @throws BookNotFoundException if no book exists with the given ID
     * @throws ValidationException if updateData contains invalid values
     * @throws ConcurrentModificationException if book was modified by another process
     * @since 1.0.0
     */
    public Book updateBook(long bookId, BookUpdateData updateData) 
        throws BookNotFoundException, ValidationException, 
               ConcurrentModificationException {
        // implementación
    }
    
    /**
     * Removes a book from the catalog and handles related data.
     *
     * @param bookId book identifier to remove
     * @param forceDelete true to delete even if book has pending orders
     * @throws IllegalArgumentException if bookId <= 0
     * @throws BookNotFoundException if book does not exist
     * @throws BookInUseException if book has pending orders and forceDelete is false
     * @throws DatabaseException if deletion fails due to database constraints
     * @since 1.0.0
     */
    public void deleteBook(long bookId, boolean forceDelete) 
        throws BookNotFoundException, BookInUseException, DatabaseException {
        // implementación
    }
}
```

### Método complejo con validaciones múltiples

```java
/**
 * Applies a discount to books in a category with complex business rules.
 * 
 * This method validates discount parameters, checks user permissions,
 * calculates affected books, and applies the discount while maintaining
 * audit trails and price history.
 *
 * @param discountData discount configuration including percentage and validity
 * @param targetCategory book category to apply discount to
 * @param userContext user making the discount request with permissions
 * @param dryRun true to simulate the operation without making changes
 * @return discount application results with affected books and calculated savings
 * @throws IllegalArgumentException if discountData is null or invalid
 * @throws IllegalArgumentException if targetCategory is null
 * @throws IllegalArgumentException if userContext is null
 * @throws PermissionDeniedException if user lacks discount management permissions
 * @throws CategoryNotFoundException if targetCategory does not exist
 * @throws InvalidDiscountException if discount violates business rules
 * @throws ConcurrencyException if another discount operation is in progress
 * @throws DatabaseException if database transaction fails
 * @since 2.0.0
 */
public DiscountApplicationResult applyDiscountToCategory(
    DiscountData discountData,
    BookCategory targetCategory,
    UserContext userContext,
    boolean dryRun) throws PermissionDeniedException, CategoryNotFoundException,
                          InvalidDiscountException, ConcurrencyException,
                          DatabaseException {
    // implementación
}
```

---

## Errores comunes y mejores prácticas

### ❌ Error 1: Descripciones vagas o redundantes

```java
// MAL - Descripción inútil
/**
 * Gets the name.
 *
 * @param id the id
 * @return the name
 */
public String getName(long id) { }

// BIEN - Descripción específica y útil
/**
 * Retrieves the display name for the specified user.
 *
 * @param userId unique user identifier
 * @return formatted display name, or "Unknown User" if not found
 */
public String getUserDisplayName(long userId) { }
```

### ❌ Error 2: No documentar valores especiales

```java
// MAL - No especifica comportamiento con null
/**
 * @param categories list of categories
 * @return filtered books
 */
public List<Book> filterByCategories(List<Category> categories) { }

// BIEN - Especifica todos los casos
/**
 * @param categories list of categories to filter by, null or empty for no filtering
 * @return filtered book list, empty list if no matches found, never null
 */
public List<Book> filterByCategories(List<Category> categories) { }
```

### ❌ Error 3: Orden incorrecto de @throws

```java
// MAL - Excepciones sin orden lógico
/**
 * @throws SecurityException if access denied  
 * @throws IllegalArgumentException if id invalid
 * @throws UserNotFoundException if user not found
 */

// BIEN - Orden lógico: validación → dominio → sistema
/**
 * @throws IllegalArgumentException if id invalid
 * @throws UserNotFoundException if user not found  
 * @throws SecurityException if access denied
 */
```

### ❌ Error 4: No sincronizar @param con parámetros reales

```java
// MAL - @param no coincide con parámetros del método
/**
 * @param name user name
 * @param email user email
 */
public User createUser(String email, String name) { }

// BIEN - @param en el mismo orden que parámetros
/**
 * @param email user email address
 * @param name user full name
 */
public User createUser(String email, String name) { }
```

### ✅ Mejores prácticas

1. **Sé específico con restricciones:**
   ```java
   @param age user age in years (must be between 18 and 120)
   @param email valid email address format
   @param password minimum 8 characters, at least one number and one letter
   ```

2. **Documenta el estado de retorno:**
   ```java
   @return Optional containing user if found, empty if user does not exist
   @return list of active orders, empty list if user has no orders, never null
   ```

3. **Explica cuándo se lanzan las excepciones:**
   ```java
   @throws ValidationException if email format is invalid or password too weak
   @throws DuplicateEmailException if another user already has this email
   ```

4. **Mantén consistencia en el proyecto:**
   ```java
   // Siempre usa el mismo formato para descripciones similares
   @param userId user identifier (must be positive)
   @param bookId book identifier (must be positive) 
   @param authorId author identifier (must be positive)
   ```

---

## Verificación del aprendizaje

### ✅ Lista de verificación de calidad

- [ ] ¿Todos los @param están en el orden correcto?
- [ ] ¿Cada @param tiene una descripción específica y útil?
- [ ] ¿El @return especifica valores especiales (null, empty, etc.)?
- [ ] ¿Todas las checked exceptions están documentadas con @throws?
- [ ] ¿Las runtime exceptions importantes están documentadas?
- [ ] ¿Cada @throws explica cuándo se lanza la excepción?
- [ ] ¿Se especifican restricciones y rangos de valores?

### 🎯 Siguiente paso

En la **[Sección 2.3 - Tags de documentación adicionales](docs/02-sintaxis-estructura/2.3-tags-adicionales.md)**, exploraremos tags como @see, @since, @deprecated y @author para enriquecer nuestra documentación.

---

**📚 Referencias:**
- [Oracle JavaDoc Tag Reference](https://docs.oracle.com/javase/8/docs/technotes/tools/windows/javadoc.html#CHDHIHA)
- [Effective Java Documentation Practices](https://www.oracle.com/technical-resources/articles/java/javadoc-tool.html)