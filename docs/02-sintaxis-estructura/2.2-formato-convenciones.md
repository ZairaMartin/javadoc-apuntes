# 2.2 - Formato y convenciones

> **üéØ Objetivo:** Dominar las reglas de formato y convenciones de escritura para crear documentaci√≥n JavaDoc profesional y consistente.

## √çndice
- [Reglas de formato b√°sicas](#reglas-de-formato-b√°sicas)
- [Convenciones de escritura](#convenciones-de-escritura)
- [Estructura y organizaci√≥n del texto](#estructura-y-organizaci√≥n-del-texto)
- [Espaciado y alineaci√≥n](#espaciado-y-alineaci√≥n)
- [Longitud de l√≠neas y saltos](#longitud-de-l√≠neas-y-saltos)
- [Capitalizaci√≥n y puntuaci√≥n](#capitalizaci√≥n-y-puntuaci√≥n)
- [Ejemplos del sistema BookStore](#ejemplos-del-sistema-bookstore)
- [Est√°ndares del equipo](#est√°ndares-del-equipo)

---

## Reglas de formato b√°sicas

### Delimitadores y estructura

```java
/**
 * [L√≠nea en blanco opcional]
 * Primera oraci√≥n del resumen (summary sentence).
 * [L√≠nea en blanco]
 * P√°rrafo de descripci√≥n detallada si es necesario.
 * Puede ocupar m√∫ltiples l√≠neas y p√°rrafos.
 * [L√≠nea en blanco]
 * @param parameter descripci√≥n del par√°metro
 * @return descripci√≥n del valor devuelto
 * @throws Exception descripci√≥n de cu√°ndo se lanza
 * @since versi√≥n
 * @author autor
 */
```

### Espaciado correcto

```java
// ‚úÖ CORRECTO - Espaciado consistente
/**
 * Creates a new book with the specified details.
 * 
 * This method validates all input parameters and initializes
 * the book with default values for optional fields.
 *
 * @param title book title, cannot be null or empty
 * @param author book author, cannot be null
 * @param isbn unique ISBN identifier
 * @return newly created book instance
 * @throws IllegalArgumentException if any parameter is invalid
 * @since 1.0.0
 */

// ‚ùå INCORRECTO - Espaciado inconsistente
/**
 *Creates a new book with the specified details.
 *
 *This method validates all input parameters and initializes
 *the book with default values for optional fields.
 * @param title book title, cannot be null or empty
 *@param author book author, cannot be null
 * @param isbn unique ISBN identifier
 *@return newly created book instance
 * @throws IllegalArgumentException if any parameter is invalid
 *@since 1.0.0
 */
```

---

## Convenciones de escritura

### 1. Tiempo verbal y persona

```java
// ‚úÖ CORRECTO - Presente, tercera persona
/**
 * Validates the user's email format.
 * Returns true if the email is valid.
 * Throws an exception if the format is incorrect.
 */

// ‚ùå INCORRECTO - Imperativo o segunda persona
/**
 * Validate the user's email format.
 * You should check if the email is valid.
 * Will throw an exception if incorrect.
 */
```

### 2. Oraci√≥n resumen (Summary sentence)

La primera oraci√≥n debe ser completa y descriptiva:

```java
// ‚úÖ CORRECTO - Oraci√≥n completa y espec√≠fica
/**
 * Calculates the total price including taxes and discounts.
 */

// ‚ùå INCORRECTO - Fragmento o demasiado gen√©rico
/**
 * Price calculation.
 */

// ‚ùå INCORRECTO - Demasiado detallada para el resumen
/**
 * Calculates the total price by adding the base price to the tax amount 
 * and then subtracting any applicable discounts based on user membership level.
 */
```

### 3. Descripciones espec√≠ficas vs gen√©ricas

```java
// ‚úÖ CORRECTO - Espec√≠fico y √∫til
/**
 * Searches for books matching the given criteria.
 *
 * @param query search terms (minimum 2 characters)
 * @param maxResults maximum number of results to return (1-100)
 * @return list of matching books, ordered by relevance score
 */

// ‚ùå INCORRECTO - Gen√©rico e in√∫til
/**
 * Does a search.
 *
 * @param query the query
 * @param maxResults the max results
 * @return the results
 */
```

---

## Estructura y organizaci√≥n del texto

### P√°rrafos y flujo de informaci√≥n

```java
/**
 * Processes a customer order with comprehensive validation and inventory management.
 * 
 * This method performs several operations in sequence:
 * First, it validates the order data including customer information,
 * product availability, and payment details. Then it reserves the
 * required inventory items and calculates the final pricing including
 * taxes and applicable discounts.
 * 
 * If any step fails, the method rolls back all changes and throws
 * an appropriate exception. Successful orders are logged for audit
 * purposes and trigger automatic email notifications to the customer.
 *
 * @param orderData complete order information including items and customer details
 * @param paymentInfo payment method and billing information
 * @return order confirmation with tracking number and estimated delivery date
 * @throws ValidationException if order data is invalid or incomplete
 * @throws InsufficientStockException if requested items are not available
 * @throws PaymentException if payment processing fails
 * @since 2.0.0
 */
public OrderConfirmation processOrder(OrderData orderData, PaymentInfo paymentInfo) 
    throws ValidationException, InsufficientStockException, PaymentException {
    // implementaci√≥n
}
```

### Listas y enumeraciones

```java
/**
 * Configures the book search engine with custom parameters.
 * 
 * Supported search features:
 * - Full-text search across title, author, and description
 * - Category-based filtering with hierarchical support
 * - Price range filtering with currency conversion
 * - Availability status filtering (in-stock, pre-order, out-of-stock)
 * - Sorting by relevance, price, publication date, or rating
 *
 * @param searchConfig search engine configuration parameters
 * @throws IllegalArgumentException if configuration is invalid
 * @since 2.1.0
 */
public void configureSearchEngine(SearchConfiguration searchConfig) {
    // implementaci√≥n
}
```

---

## Espaciado y alineaci√≥n

### Alineaci√≥n de asteriscos

```java
// ‚úÖ CORRECTO - Asteriscos alineados
/**
 * Method with properly aligned asterisks.
 * Each line starts with a space and asterisk.
 * This creates consistent visual formatting.
 *
 * @param parameter description
 * @return description
 */

// ‚ùå INCORRECTO - Asteriscos desalineados
/**
* Method with misaligned asterisks.
  * Inconsistent spacing makes it hard to read.
 * Some lines have different indentation.
*
* @param parameter description
 * @return description
*/
```

### Espacios alrededor de tags

```java
// ‚úÖ CORRECTO - Espacios consistentes
/**
 * Method description here.
 *
 * @param userId user identifier
 * @param bookId book identifier
 * @return operation result
 * @throws UserNotFoundException if user not found
 * @throws BookNotFoundException if book not found
 * @since 1.0.0
 */

// ‚ùå INCORRECTO - Espacios inconsistentes
/**
 * Method description here.
 *
 * @param userId user identifier
 *@param bookId book identifier
 * @return operation result
 * @throws UserNotFoundException if user not found
 *@throws BookNotFoundException if book not found
 *@since 1.0.0
 */
```

---

## Longitud de l√≠neas y saltos

### L√≠mite de caracteres por l√≠nea

```java
// ‚úÖ CORRECTO - L√≠neas no muy largas, f√°ciles de leer
/**
 * Updates user preferences with validation and audit logging.
 * 
 * This method performs comprehensive validation of the preference
 * data, updates the user's profile, and creates an audit log entry
 * for compliance purposes.
 *
 * @param userId unique user identifier (must be positive)
 * @param preferences map of preference keys and values to update
 * @return updated user preferences object
 * @throws IllegalArgumentException if userId is invalid
 * @throws ValidationException if preferences contain invalid values
 */

// ‚ùå INCORRECTO - L√≠neas demasiado largas
/**
 * Updates user preferences with validation and audit logging and comprehensive error handling and rollback capabilities.
 * 
 * This method performs comprehensive validation of the preference data, updates the user's profile, creates an audit log entry for compliance purposes, and handles all possible error scenarios with appropriate rollback mechanisms.
 *
 * @param userId unique user identifier (must be positive integer value and cannot be null or zero or negative)
 * @param preferences map of preference keys and values to update (cannot be null and must contain valid key-value pairs)
 * @return updated user preferences object with all modifications applied successfully
 */
```

### Saltos de l√≠nea apropiados

```java
/**
 * Generates a comprehensive sales report for the specified time period.
 * 
 * The report includes:
 * - Total sales revenue and transaction count
 * - Best-selling books and categories  
 * - Customer acquisition and retention metrics
 * - Inventory turnover and stock level analysis
 * 
 * Data is aggregated from multiple sources and cached for performance.
 * Reports are generated asynchronously for large date ranges.
 *
 * @param startDate report period start date (inclusive)
 * @param endDate report period end date (inclusive)
 * @param includeDetails true to include detailed transaction breakdown
 * @return sales report with all requested metrics
 * @throws IllegalArgumentException if date range is invalid
 * @throws ReportGenerationException if report creation fails
 * @since 2.2.0
 */
```

---

## Capitalizaci√≥n y puntuaci√≥n

### Reglas de capitalizaci√≥n

```java
// ‚úÖ CORRECTO - Capitalizaci√≥n apropiada
/**
 * Validates ISBN format according to international standards.
 *
 * @param isbn ISBN string to validate
 * @return true if ISBN format is valid, false otherwise
 * @see ISBNValidator
 * @see <a href="https://www.isbn-international.org/">ISBN International</a>
 */

// ‚ùå INCORRECTO - Capitalizaci√≥n inconsistente
/**
 * validates isbn Format According To International Standards.
 *
 * @param ISBN isbn String To Validate
 * @return True If isbn format Is valid, False otherwise
 */
```

### Puntuaci√≥n en descripciones

```java
// ‚úÖ CORRECTO - Puntuaci√≥n apropiada
/**
 * Calculates shipping cost based on weight, distance, and delivery speed.
 *
 * @param weight package weight in kilograms
 * @param distance delivery distance in kilometers  
 * @param speed delivery speed option (standard, express, or overnight)
 * @return shipping cost in local currency
 */

// ‚ùå INCORRECTO - Puntuaci√≥n incorrecta o ausente
/**
 * Calculates shipping cost based on weight distance and delivery speed
 *
 * @param weight package weight in kilograms,
 * @param distance delivery distance in kilometers.  
 * @param speed delivery speed option: standard express or overnight;
 * @return shipping cost in local currency.
 */
```

---

## Ejemplos del sistema BookStore

### Entity con formato perfecto

```java
/**
 * Represents a book in the bookstore catalog system.
 * 
 * This entity encapsulates all book-related information including
 * bibliographic data, pricing, inventory status, and customer ratings.
 * The class implements validation rules for ISBN format, price constraints,
 * and publication date consistency.
 * 
 * Books can be in different states:
 * - Available: In stock and ready for purchase
 * - Pre-order: Available for advance purchase with future release date
 * - Out of stock: Temporarily unavailable but may be restocked
 * - Discontinued: No longer available for purchase
 *
 * @author Zaira Mart√≠n
 * @version 1.3.0
 * @since 1.0.0
 * @see Author
 * @see Publisher  
 * @see BookCategory
 */
@Entity
@Table(name = "books")
public class Book {
    
    /**
     * Unique identifier for the book record.
     * 
     * Generated automatically by the database using sequence strategy.
     * This ID is used for all internal references and API operations.
     *
     * @since 1.0.0
     */
    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE)
    private Long id;
    
    /**
     * International Standard Book Number in ISBN-13 format.
     * 
     * Must follow the pattern: 978-X-XXXX-XXXX-X where X represents digits.
     * This field is unique across the system and cannot be null.
     * Used for catalog management and external system integration.
     *
     * @since 1.0.0
     */
    @Column(unique = true, nullable = false)
    private String isbn;
}
```

### Service con documentaci√≥n empresarial

```java
/**
 * Business service for managing book catalog operations.
 * 
 * This service implements the core business logic for book management
 * including creation, updates, search, and inventory operations. All
 * methods are transactional and include comprehensive error handling
 * and audit logging.
 * 
 * The service integrates with multiple external systems:
 * - ISBN validation services for book verification
 * - Publisher APIs for metadata enrichment  
 * - Inventory management system for stock tracking
 * - Search engine for full-text indexing
 *
 * @author Zaira Mart√≠n
 * @version 2.1.0
 * @since 1.0.0
 * @see BookRepository
 * @see InventoryService
 * @see SearchService
 */
@Service
@Transactional
public class BookService {
    
    /**
     * Creates a new book in the catalog with comprehensive validation.
     * 
     * This method performs multiple validation steps:
     * 1. Validates ISBN format and uniqueness
     * 2. Verifies author and publisher existence
     * 3. Checks category validity and hierarchy
     * 4. Validates price and publication date constraints
     * 5. Enriches metadata from external sources
     * 
     * Upon successful creation, the book is automatically indexed
     * for search and an audit log entry is created.
     *
     * @param bookData complete book information for creation
     * @param initialInventory starting stock quantity (must be >= 0)
     * @return newly created book with generated ID and enriched metadata
     * @throws IllegalArgumentException if bookData is null or invalid
     * @throws DuplicateISBNException if ISBN already exists in catalog
     * @throws AuthorNotFoundException if specified author does not exist
     * @throws CategoryValidationException if category is invalid or inactive
     * @throws ExternalServiceException if metadata enrichment fails
     * @since 1.0.0
     * @see #validateBookData(BookCreateData)
     * @see #enrichMetadata(Book)
     * @see InventoryService#initializeStock(Long, int)
     */
    public Book createBook(BookCreateData bookData, int initialInventory)
        throws DuplicateISBNException, AuthorNotFoundException, 
               CategoryValidationException, ExternalServiceException {
        
        validateArguments(bookData, initialInventory);
        
        Book book = new Book();
        // Mapeo de datos
        populateBookFields(book, bookData);
        
        // Validaciones de negocio
        validateBusinessRules(book);
        
        // Enriquecimiento de metadatos
        enrichMetadata(book);
        
        // Persistencia
        book = bookRepository.save(book);
        
        // Inicializaci√≥n de inventario
        inventoryService.initializeStock(book.getId(), initialInventory);
        
        // Indexaci√≥n para b√∫squeda
        searchService.indexBook(book);
        
        // Auditor√≠a
        auditService.logBookCreation(book);
        
        return book;
    }
}
```

---

## Est√°ndares del equipo

### Plantilla est√°ndar para m√©todos

```java
/**
 * [Verbo en tercera persona] [objeto] [prop√≥sito espec√≠fico].
 * 
 * [Descripci√≥n detallada del comportamiento y contexto de negocio]
 * [Informaci√≥n sobre validaciones, efectos secundarios, integraci√≥n]
 * 
 * [Casos especiales o consideraciones importantes]
 *
 * @param [nombre] [descripci√≥n espec√≠fica con tipo, restricciones, formato]
 * @param [nombre] [descripci√≥n espec√≠fica con valores v√°lidos o rangos]
 * @return [descripci√≥n espec√≠fica incluyendo casos null/empty/especiales]
 * @throws [ExceptionType] [condici√≥n espec√≠fica que causa la excepci√≥n]
 * @throws [ExceptionType] [otra condici√≥n espec√≠fica]
 * @since [versi√≥n]
 * @see [ClaseRelacionada]
 * @see [#metodoRelacionado(tipo)]
 */
```

### Reglas de consistencia

1. **Longitud de l√≠nea**: M√°ximo 80-100 caracteres
2. **Espaciado**: L√≠nea en blanco antes de @tags
3. **Orden de tags**: @param ‚Üí @return ‚Üí @throws ‚Üí @see ‚Üí @since ‚Üí @author
4. **Tiempo verbal**: Siempre presente, tercera persona
5. **Puntuaci√≥n**: Punto final en oraciones completas, no en tags cortos
6. **Capitalizaci√≥n**: Primera palabra de cada descripci√≥n en may√∫scula

### Niveles de documentaci√≥n por tipo

```java
// P√öBLICO - Documentaci√≥n completa
/**
 * [Descripci√≥n completa con contexto de negocio]
 * [M√∫ltiples p√°rrafos si es necesario]
 * [Ejemplos de uso si es complejo]
 * 
 * @param ... [descripci√≥n detallada]
 * @return ... [casos especiales incluidos]  
 * @throws ... [todas las excepciones documentadas]
 * @since ...
 * @see ...
 */
public ReturnType publicMethod(params) { }

// PROTEGIDO - Documentaci√≥n moderada  
/**
 * [Descripci√≥n clara del prop√≥sito]
 * [Informaci√≥n t√©cnica relevante]
 * 
 * @param ... [descripci√≥n espec√≠fica]
 * @return ... [informaci√≥n √∫til]
 * @since ...
 */
protected ReturnType protectedMethod(params) { }

// PRIVADO - Documentaci√≥n m√≠nima pero clara
/**
 * [Prop√≥sito espec√≠fico del m√©todo]
 * 
 * @param ... [informaci√≥n esencial]
 * @return ... [qu√© devuelve]
 */
private ReturnType privateMethod(params) { }
```

---

## Verificaci√≥n del aprendizaje

### ‚úÖ Lista de verificaci√≥n de formato

- [ ] ¬øLos asteriscos est√°n alineados consistentemente?
- [ ] ¬øHay l√≠nea en blanco antes de los @tags?
- [ ] ¬øLas l√≠neas no exceden 80-100 caracteres?
- [ ] ¬øSe usa presente, tercera persona consistentemente?
- [ ] ¬øLa primera oraci√≥n es completa y espec√≠fica?
- [ ] ¬øLos p√°rrafos est√°n bien estructurados?
- [ ] ¬øLa capitalizaci√≥n y puntuaci√≥n son correctas?
- [ ] ¬øSe siguen las convenciones del equipo?

### üéØ Siguiente paso

En la **[Secci√≥n 2.3 - HTML en JavaDoc](docs/02-sintaxis-estructura/2.3-html-javadoc.md)**, aprenderemos a usar elementos HTML para crear documentaci√≥n rica con formato, tablas, listas y enlaces que mejoran significativamente la presentaci√≥n.

---

**üìö Referencias:**
- [Oracle Code Conventions for Java](https://www.oracle.com/java/technologies/javase/codeconventions-contents.html)
- [Google Java Style Guide](https://google.github.io/styleguide/javaguide.html)
- [JavaDoc Style Guide](https://blog.joda.org/2012/11/javadoc-coding-standards.html)